# reddit_reposts

The aim of this project is to analyze the urls linked in reddit posts to understand how subreddits are linked, and how information go through subreddits.

The dataset use here is the [pushshift](https://files.pushshift.io/reddit/submissions/) dataset.

## Compiling and executing the project

This is a regular [rust](https://www.rust-lang.org/) project that can be compiled with [cargo](https://doc.rust-lang.org/cargo/) using rust nightly. 

The `cargo build` command compiles the project, and `cargo run --release -- [params]` executes the program.

The documentation can be generated with the `cargo doc` command.

## Command line interface

The program use the [clap](https://clap.rs/) command interface. `reddit_reposts --help` shows the list of commands.

### `simplify` subcommand

The first important command is `reddit_reposts simplify [FLAGS] <INPUT> [KEEP_NON_URL_POSTS]`. It simplify a file from the pushshift dataset by removing some spurious reddit posts (like the promoted posts), and spurious fields from the JSON objects. It also reduce the size of the dataset by converting the JSON file into a CSV file.

`<INPUT>` is the input file path, and `[KEEP_NON_URL_POSTS]` is a boolean indicating if the posts without url should be kept or not.

### `compute_stats` subcommand

The command to precompute some subreddit statistics is `reddit_reposts compute_stats <OUTPUT> <INPUTS>...`. It takes an output file, and multiple CSV input files that were generated using the simplify command, and generate subreddit statistics.

### `get_stats` subcommand

The command `reddit_reposts get_stats <STATS_FILE> <SUBREDDITS>...` display some statistics of subreddits, like the number of posts, the number of comments, the sum of post scores, and the number of NSFW posts.

### `get_reposts` subcommand

The command `reddit_reposts get_reposts <SUBREDDIT> <INPUTS>...` display the reposts statistics of a subreddits, like the number of reposts from other subreddits, the number of reposts by other subreddits, or the number of reposts on the subreddit itself. It also display the subreddits that often reposts, or that this subreddit reposts from. 

### `ppmi` subcommand

The command `reddit_reposts ppmi <OUTPUT> <STATS_FILE> <N_SUBREDDITS> <INPUTS>...` computes the [PPMI](https://en.wikipedia.org/wiki/Pointwise_mutual_information) matrix based on the number of shared urls between subreddits. `<OUTPUT>` is the output file path, `<STATS_FILE>` is the generated file path by the `substats` command, `N_SUBREDDITS` is the number of subreddits considered (these will be the most active subreddits), and `INPUTS` is the dataset files generated by the `simplify` command.

### `plot/ppmi.py` script

The command `plot/ppmi.py <FILE>` executes a [t-SNE](https://lvdmaaten.github.io/tsne/) algorithm on the ppmi matrix written in `<FILE>` by the `ppmi` command. It show a matplotlib plot of the generated points, like the following plot:

![tsne](https://github.com/math-fehr/reddit_reposts/blob/master/tsne.png)
